name: phalconphp
version: 0.1.6
inherits: wercker/php@1.0.1
type: box
platform: ubuntu@12.04
description: wercker box for php with phalconphp installed
keywords:
  - phalconphp
  - php
  - opensource
  - database
packages:
  - phalconphp@1.2.5
script: |
  sudo apt-get install libicu48
  sudo apt-get install libicu-dev
  #imagick
  echo '\n' | pecl install imagick
  # intl
  echo '\n' | sudo pecl install intl
  #phalconphp
  git clone -q --depth=1 https://github.com/phalcon/cphalcon.git -b 1.2.5
  cd cphalcon/ext;
  export CFLAGS="-g3 -O1 -fno-delete-null-pointer-checks -Wall";
  phpize && ./configure --enable-phalcon && make -j4 && sudo make install
  echo 'extension=phalcon.so' >> $HOME/.phpenv/versions/$(phpenv version-name)/etc/php.ini
  echo 'extension=intl.so' >> $HOME/.phpenv/versions/$(phpenv version-name)/etc/php.ini
  phpenv rehash
