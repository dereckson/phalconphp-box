name: phalconphp
version: 0.2.0
inherits: wercker/php@1.0.1
type: box
platform: ubuntu@12.04
description: wercker box for php with phalconphp installed
keywords:
  - phalconphp
  - php
  - opensource
  - database
  - apcu
  - memcache
  - igbinary
packages:
  - phalconphp@1.2.5
script: |
  # intl
  sudo apt-get install libicu-dev
  printf "\n" | pecl install intl

  # imagick
  echo '\n' | pecl install imagick

  # apc
  echo '\n' | pecl install apcu-beta

  #memcache
  echo '\n' | pecl install memcache

  # igbinary
  echo '\n' | pecl install igbinary

  #phalconphp
  git clone -q --depth=1 https://github.com/phalcon/cphalcon.git -b 1.2.5
  cd cphalcon/ext;
  export CFLAGS="-g3 -O1 -fno-delete-null-pointer-checks -Wall";
  phpize && ./configure --enable-phalcon && make -j4 && sudo make install
  phpenv rehash
