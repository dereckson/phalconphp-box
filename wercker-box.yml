name: phalconphp
version: 0.5.1
inherits: wercker/php@1.1.0
type: box
platform: ubuntu@12.04
description: wercker box for php with phalconphp installed
keywords:
  - phalconphp
  - php
  - opensource
  - database
  - apcu
  - memcache
  - igbinary
packages:
  - phalconphp@1.3.2
script: |
  # imagick
  echo '\n' | pecl install imagick

  # apc
  echo '\n' | pecl install apcu-beta

  #memcache
  echo '\n' | pecl install memcache

  # igbinary
  echo '\n' | pecl install igbinary

  # spl types
  echo '\n' | pecl install spl_types

  ##phalconphp
  git clone -q --depth=1 https://github.com/phalcon/cphalcon.git -b 1.3.2
  cd cphalcon/ext;
  export CFLAGS="-g3 -O1 -fno-delete-null-pointer-checks -Wall";
  phpize && ./configure --enable-phalcon && make -j4 && sudo make install
  phpenv rehash
